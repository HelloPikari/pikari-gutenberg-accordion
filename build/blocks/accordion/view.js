import{getContext as t,getElement as e,store as i}from"@wordpress/interactivity";function o(t,e){e?t.classList.add("is-expanded"):t.classList.remove("is-expanded");const i=t.querySelector(".wp-block-group");i&&(e?i.removeAttribute("hidden"):i.setAttribute("hidden",""));const o=t.querySelector(".wp-block-heading, .wp-block-post-title, h1, h2, h3, h4, h5, h6");o&&o.setAttribute("aria-expanded",e?"true":"false")}function n(){return Math.random().toString(36).substring(2,11)}i("pikari/accordion",{actions:{toggle:i=>{if(i){const t=i.target.closest(".wp-block-heading, .wp-block-post-title, h1, h2, h3, h4, h5, h6");if("keydown"===i.type&&"Enter"!==i.key&&" "!==i.key)return;if(!t)return;"keydown"===i.type&&i.preventDefault()}const{ref:n}=e(),a=n.id||n.dataset.itemId;if(!a)return;const r=t(),s=r.expandedItems[a]||!1,d={...r.expandedItems};r.allowMultipleExpanded||s||Object.keys(d).forEach(t=>{t!==a&&(d[t]=!1)}),d[a]=!s,r.expandedItems=d,o(n,!s),n.dispatchEvent(new CustomEvent("pikari-gutenberg-accordion:toggle",{detail:{expanded:!s},bubbles:!0}));const c=s?"pikari-gutenberg-accordion:close":"pikari-gutenberg-accordion:open";n.dispatchEvent(new CustomEvent(c,{bubbles:!0}))}},callbacks:{init:()=>{const{ref:i}=e(),a=t();i.querySelectorAll(".wp-block-pikari-gutenberg-accordion-item").forEach(t=>{t.dataset.iconStyle||(t.dataset.iconStyle=a.iconStyle),t.dataset.iconPosition||(t.dataset.iconPosition=a.iconPosition);const e=t.querySelector(".wp-block-heading, .wp-block-post-title, h1, h2, h3, h4, h5, h6"),i=t.querySelector(".wp-block-group");if(e&&i){const r=e.id||`accordion-heading-${n()}`,s=i.id||`accordion-content-${n()}`,d=t.id||`accordion-item-${n()}`;e.id=r,i.id=s,t.id=d,t.dataset.itemId=d,e.setAttribute("role","button"),e.setAttribute("tabindex","0"),e.setAttribute("aria-controls",s),e.style.cursor="pointer",i.setAttribute("aria-labelledby",r),i.setAttribute("role","region");const c="true"===t.dataset.initiallyExpanded;a.expandedItems[d]=c,a.enableAnimations&&t.classList.add("has-animation"),e.setAttribute("aria-expanded",c?"true":"false"),o(t,c)}})},initAccordionItem:()=>{const{ref:i}=e(),a=t();i.dataset.iconStyle||(i.dataset.iconStyle=a.iconStyle),i.dataset.iconPosition||(i.dataset.iconPosition=a.iconPosition);const r=i.querySelector(".wp-block-heading, .wp-block-post-title, h1, h2, h3, h4, h5, h6"),s=i.querySelector(".wp-block-group");if(r&&s){const t=r.id||`accordion-heading-${n()}`,e=s.id||`accordion-content-${n()}`,d=i.id||`accordion-item-${n()}`;r.id=t,s.id=e,i.id=d,i.dataset.itemId=d,r.setAttribute("role","button"),r.setAttribute("tabindex","0"),r.setAttribute("aria-controls",e),r.style.cursor="pointer",s.setAttribute("aria-labelledby",t),s.setAttribute("role","region");const c="true"===i.dataset.initiallyExpanded;a.expandedItems[d]=c,a.enableAnimations&&i.classList.add("has-animation"),r.setAttribute("aria-expanded",c?"true":"false"),o(i,c)}}}});